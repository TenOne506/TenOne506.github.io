import{_ as i,c as a,e as n,o as l}from"./app-BChvZF5M.js";const h={};function t(F,s){return l(),a("div",null,[...s[0]||(s[0]=[n(`<h2 id="几乎唯一子数组的最大和" tabindex="-1"><a class="header-anchor" href="#几乎唯一子数组的最大和"><span><a href="https://leetcode.cn/problems/maximum-sum-of-almost-unique-subarray/description/" target="_blank" rel="noopener noreferrer">几乎唯一子数组的最大和</a></span></a></h2><p>给你一个整数数组<code>nums</code>和两个正整数<code>m</code>和<code>k</code>。</p><p>请你返回<code>nums</code>中长度为<code>k</code>的 <strong>几乎唯一</strong> 子数组的最大和如果不存在几乎唯一子数组，请你返回<code>0</code>。</p><p>如果<code>nums</code>的一个子数组有至少<code>m</code>个互不相同的元素，我们称它是<strong>几乎唯一</strong>子数组。</p><p>子数组指的是一个数组中一段连续<strong>非空</strong>的元素序列。</p><div class="demo-wrapper"><div class="demo-head"><div class="demo-ctrl"><i></i><i></i><i></i></div></div><div class="demo-container"><p>示例 1：<br> 输入：nums = [2,6,7,3,1,7], m = 3, k = 4<br> 输出：18 <br> 解释：总共有 3 个长度为 4 的子数组。分别为 [2, 6, 7, 3] ，[6, 7, 3, 1] 和 [7, 3, 1, 7] 。 这些子数组中，[2, 6, 7, 3] 和 [3, 1, 7] 有 3 个互不相同的元素。其中，[2, 6, 7, 3] 的和是 18 ，是最大的和。</p><p>示例 2：<br> 输入：nums = [5,9,9,2,4,5,4], m = 1, k = 3<br> 输出：23 <br> 解释：总共有 5 个长度为 3 的子数组。分别为 [5, 9, 9] ，[9, 9, 2] ，[9, 2, 4] ，[2, 4, 5] 和 [4, 5, 4] 。 这些子数组中，只有 [5, 9, 9] 存在 1 个互不相同的元素，所以我们返回 23 。</p><p>示例 3：<br> 输入：nums = [1,2,1,2,1,2,1], m = 3, k = 3 <br> 输出：0 <br> 解释：输入数组中不存在长度为 k = 3 的子数组含有至少 m = 3 个互不相同元素的子数组。所以不存在几乎唯一子数组，最大和为 0 。</p></div></div><p>这题也是一眼滑动窗口，但是需要注意的是，需要记录窗口中互不相同的元素数量，然后每次移动窗口时，需要更新窗口中互不相同的元素数量。</p><p>判断几乎唯一这个条件可以使用 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mi>a</mi><mi>p</mi></mrow><annotation encoding="application/x-tex">map</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">ma</span><span class="mord mathnormal">p</span></span></span></span> 来实现。<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mi>e</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">key</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal" style="margin-right:0.03588em;">ey</span></span></span></span> 为元素，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mi>a</mi><mi>l</mi><mi>u</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">value</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">u</span><span class="mord mathnormal">e</span></span></span></span> 为元素出现的次数。 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mi>a</mi><mi>p</mi></mrow><annotation encoding="application/x-tex">map</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">ma</span><span class="mord mathnormal">p</span></span></span></span> 的大小即为不重复元素的个数。</p><div class="language-c++ line-numbers-mode" data-highlighter="shiki" data-ext="c++" style="--shiki-light:#24292eff;--shiki-dark:#eef0f9;--shiki-light-bg:#ffffff;--shiki-dark-bg:#17191e;"><pre class="shiki shiki-themes min-light houston vp-code"><code class="language-c++"><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#ACAFFF;"> Solution</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">public</span><span style="--shiki-light:#212121;--shiki-dark:#54B9FF;">:</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">  long</span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;"> long</span><span style="--shiki-light:#6F42C1;--shiki-dark:#00DAEF;"> maxSum</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#ACAFFF;">vector</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">&lt;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">int</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">&gt;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">&amp;</span><span style="--shiki-light:#24292EFF;--shiki-light-font-style:inherit;--shiki-dark:#4BF3C8;--shiki-dark-font-style:italic;"> nums</span><span style="--shiki-light:#212121;--shiki-dark:#EEF0F9;">,</span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;"> int</span><span style="--shiki-light:#24292EFF;--shiki-light-font-style:inherit;--shiki-dark:#4BF3C8;--shiki-dark-font-style:italic;"> m</span><span style="--shiki-light:#212121;--shiki-dark:#EEF0F9;">,</span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;"> int</span><span style="--shiki-light:#24292EFF;--shiki-light-font-style:inherit;--shiki-dark:#4BF3C8;--shiki-dark-font-style:italic;"> k</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">) {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">    long</span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;"> long</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;"> res </span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#FFD493;">0</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">;</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">    long</span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;"> long</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;"> s </span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#FFD493;">0</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">;</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">    int</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;"> n </span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#4BF3C8;"> nums</span><span style="--shiki-light:#212121;--shiki-dark:#EEF0F9;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#00DAEF;">size</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">();</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">    unordered_map</span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">&lt;int</span><span style="--shiki-light:#212121;--shiki-dark:#EEF0F9;">,</span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">int&gt;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;"> hsmap;</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">    if</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">(n </span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">&lt;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;"> k ) </span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">return</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;"> res;</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#EEF0F98F;--shiki-dark-font-style:italic;">    //先添加k-1个数</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">    for</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">(</span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">int</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;"> i </span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#FFD493;">0</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">;i</span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">&lt;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">k</span><span style="--shiki-light:#D32F2F;--shiki-dark:#EEF0F9;">-</span><span style="--shiki-light:#1976D2;--shiki-dark:#FFD493;">1</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">++</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">i){</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">      s </span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">+=</span><span style="--shiki-light:#1976D2;--shiki-dark:#4BF3C8;"> nums</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">[i];</span></span>
<span class="line"><span style="--shiki-light:#1976D2;--shiki-dark:#4BF3C8;">      hsmap</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">[</span><span style="--shiki-light:#1976D2;--shiki-dark:#4BF3C8;">nums</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">[i]]</span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">++</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">    }</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">    for</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">(</span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">int</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;"> i </span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;"> k</span><span style="--shiki-light:#D32F2F;--shiki-dark:#EEF0F9;">-</span><span style="--shiki-light:#1976D2;--shiki-dark:#FFD493;">1</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">;i</span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">&lt;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">n;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">++</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">i){</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">      s </span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">+=</span><span style="--shiki-light:#1976D2;--shiki-dark:#4BF3C8;"> nums</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">[i];</span><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#EEF0F98F;--shiki-dark-font-style:italic;"> // 再添加一个数就是 k 个数了</span></span>
<span class="line"><span style="--shiki-light:#1976D2;--shiki-dark:#4BF3C8;">      hsmap</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">[</span><span style="--shiki-light:#1976D2;--shiki-dark:#4BF3C8;">nums</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">[i]]</span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">++</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">;</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">      if</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;"> (</span><span style="--shiki-light:#1976D2;--shiki-dark:#4BF3C8;">hsmap</span><span style="--shiki-light:#212121;--shiki-dark:#EEF0F9;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#00DAEF;">size</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">() </span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">&gt;=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;"> m) {</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">        res </span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#00DAEF;"> max</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">(res</span><span style="--shiki-light:#212121;--shiki-dark:#EEF0F9;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;"> s);</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">      int</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;"> out </span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#4BF3C8;"> nums</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">[i </span><span style="--shiki-light:#D32F2F;--shiki-dark:#EEF0F9;">-</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;"> k </span><span style="--shiki-light:#D32F2F;--shiki-dark:#EEF0F9;">+</span><span style="--shiki-light:#1976D2;--shiki-dark:#FFD493;"> 1</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">];</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">      s </span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">-=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;"> out;</span><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#EEF0F98F;--shiki-dark-font-style:italic;"> // 下一个子数组不包含 out，移出窗口</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">      if</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;"> (</span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">--</span><span style="--shiki-light:#1976D2;--shiki-dark:#4BF3C8;">hsmap</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">[out] </span><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">==</span><span style="--shiki-light:#1976D2;--shiki-dark:#FFD493;"> 0</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">) {</span></span>
<span class="line"><span style="--shiki-light:#1976D2;--shiki-dark:#4BF3C8;">        hsmap</span><span style="--shiki-light:#212121;--shiki-dark:#EEF0F9;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#00DAEF;">erase</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">(out);</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">    }</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#54B9FF;">    return</span><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;"> res;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#EEF0F9;">};</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,9)])])}const p=i(h,[["render",t]]),e=JSON.parse('{"path":"/code/o7lzvlkj/","title":"几乎唯一子数组的最大和","lang":"zh-CN","frontmatter":{"title":"几乎唯一子数组的最大和","createTime":"2025/01/05 19:48:10","permalink":"/code/o7lzvlkj/"},"readingTime":{"minutes":2.07,"words":621},"git":{"createdTime":1764058930000},"filePathRelative":"code/滑动窗口/几乎唯一子数组的最大和.md","headers":[]}');export{p as comp,e as data};
