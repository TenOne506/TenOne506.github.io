---
title: 分布式行为
createTime: 2025/12/14 22:34:33
permalink: /distsys/4via9eso/
---
## Ayda' Phd paper
###  DSG（Dependency Serialization Graph，依赖序列化图）

- 用途：判断一个并发事务历史是否可序列化。
- 节点：每个已提交的事务。
- 边类型（表示事务间的依赖）：
  - 写读（wr） 边：$T_1$ 写了数据 → $T_2$ 读了同一数据 ⇒ $T_1$ → $T_2$  
  - 写写（ww）边：$T_1$ 写了数据 → $T_2$ 覆盖写同一数据 ⇒ $T_1$ → $T_2$  
  - 读写（rw） 边：$T_1$ 读了数据 → $T_2$ 后来写了该数据 ⇒ $T_1$ → $T_2$  
- 判断规则：
  - 若 DSG 中无环 → 历史是可序列化的
  - 若 DSG 中有环 → 不可序列化，存在异常（如 G0、G1 等）

###  G0 Write Cycle 写循环
#### 场景描述
比如现在有两个事务
1. $T_i$: 写$x = 1,y=10$
2. $T_j$: 写$x = 2,y=20$

执行顺序可能为
1. $T_i$ 写 $x = 1$
2. $T_j$ 写 $x = 2$（覆盖了 $T_i$ 的 $x$ ）
3. $T_j$ 写 $y = 10$
4. $T_i$ 写 y = 20（覆盖了 $T_j$ 的 $y$）

最终观测到的结果为：

$x = 2$ 来自 $T_j$

$y = 20$ 来自 $T_i$

没有一个全局的串行顺序能解释这个结果 → 违反了可序列化的基本要求。

#### Ayda's Phd paper 中的形式化定义

写-写依赖（write-write dependency）：如果事务 $T_1$ 写了某个数据项，然后 $T_2$  又写了同一个数据项，并且 $T_2$ 的写发生在 $T_1$ 提交之后（或逻辑上在其后），就有一条从 $T_1$ -> $T_2$ 的写依赖边。
``` text
T1 → T2
↑    ↓
└────┘   （即 T1 → T2 → T1，形成环）
```
如果这些写依赖边形成一个有向环，就构成了 $G0$ 写循环现象。